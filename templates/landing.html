{% extends 'base.html'%}

{% block content%}

{% load static%}
<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;

}
    .row-1 {
            display: flex;
            justify-content: center;
            flex-direction: row;
            margin-top: 20vw;
        }
    .row-1 > div {
        display: flex;
    }
    .timer {
            font-size: 3vw;
            font-family: "Lunasima", sans-serif;
            font-weight: 700;
            font-style: normal;
            color: #c8746c;
            margin-left: 0.25vw;
            margin-right: 0.25vw;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        #separator {

            width: 0.25vw;
            height: 5vw; /* Adjust height as needed */
            background-color: #e0ccb4;
            align-self: center;
            margin-bottom: 4vw;
        }
        :root {
  --rpx: 100vw / 667;
}





.rectangle {
    position: relative;
    width: 90vw;
    height: calc(337 * var(--rpx));
    background: #fee8ce;
    overflow: visible auto;
    border-radius: calc(50 * var(--rpx));
    display: flex;
    flex-direction: column;
    justify-content: center;
    justify-self: center;
    margin-left: auto;
    margin-right: auto;
    margin-top: auto;
    border: calc(2.5 * var(--rpx)) solid #e1cfb9;
    margin-bottom: 10vw;
}
.flex-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  width: 80vw;
  height: calc(42 * var(--rpx));
  margin: auto;
  z-index: 9;
}
.rectangle-1 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 3;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-2 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 4;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-3 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 1;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-4 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 2;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-5 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 8;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-6 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 9;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}

.rectangle-7 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 5;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.flex-row-ae {
  position: relative;
  width: 85vw;
  height: calc(203 * var(--rpx));
  z-index: 28;
  justify-content: center;
  margin: auto;
}
.rectangle-a {
  position: absolute;
  width: 60vw;
  height: calc(203 * var(--rpx));
  left: calc(72 * var(--rpx));
  background: #fff2e2;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
  z-index: 19;
  border-radius: calc(18 * var(--rpx));
  margin: auto;
}
.rectangle-b {
  position: absolute;
  width: 20vw;
  height: calc(178 * var(--rpx));
  top: calc(7.5 * var(--rpx));
  left: calc(6.5 * var(--rpx));
  background: #d9d9d9;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
  z-index: 20;
  border-radius: calc(10 * var(--rpx));
}

.brand-name {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  position: absolute;
  width: 38.9vw;
  left: 20.6vw;
  top: 3.2vw;
  height: calc(37 * var(--rpx));
  color: #ae9d87;
  font-size: {{fs}}vw;
  line-height: calc(24.204544067382812 * var(--rpx));
  text-align: left;
  z-index: 21;
}
.product-name {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  height: calc(17 * var(--rpx));
  top: calc(54.5 * var(--rpx));
  width: 38.9vw;
  left: 20.6vw;
  color: #c0b8af;
  font-size: calc(16 * var(--rpx));
  line-height: calc(19 * var(--rpx));
  text-align: left;
  white-space: nowrap;
  z-index: 22;
}
.starting-price {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  position: absolute;
  height: calc(17 * var(--rpx));
  top: 10.5vw;
  left: 22.5vw;
  color: #d5cbc0;
  font-size: calc(14 * var(--rpx));
  line-height: calc(16.94318199157715 * var(--rpx));
  text-align: left;
  white-space: nowrap;
  z-index: 23;
}
.auction-time {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  position: absolute;
  height: calc(25 * var(--rpx));
  top: calc(94.5 * var(--rpx));
  width: 38.9vw;
  left: 20.6vw;
  color: #e7b1a5;
  font-size: calc(17 * var(--rpx));
  line-height: calc(20.573863983154297 * var(--rpx));
  text-align: left;
  white-space: nowrap;
  z-index: 24;
}
.rectangle-c {
  position: absolute;
  width: 36vw;
  height: calc(58 * var(--rpx));
  top: calc(119.5 * var(--rpx));
  left: 22vw;
  cursor: pointer;
  background: #d1756e;
  border: none;
  z-index: 25;
  border-radius: calc(20 * var(--rpx));
}
.rectangle-c:hover {
  background: #a82424;
}
.view-product {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  left: 0;
  top: 0;
  width: 36vw;
  height: calc(58 * var(--rpx));
  color: #fff2e2;
  font-size: calc(30 * var(--rpx));
  line-height: calc(34 * var(--rpx));
  text-align: center;
  white-space: nowrap;
  z-index: 26;
}
.polygon {
  position: absolute;
  width: calc(81 * var(--rpx));
  height: calc(82.00000000000001 * var(--rpx));
  top: calc(67.99999999999999 * var(--rpx));
  left: 70vw;
  background: url("{% static 'right.png' %}")
    no-repeat center;
  background-size: cover;
  z-index: 28;
}
.polygon-d {
  position: absolute;
  width: calc(81 * var(--rpx));
  height: calc(82 * var(--rpx));
  top: calc(68 * var(--rpx));
  left: 0;
  background: url("{% static 'left.png' %}")
    no-repeat center;
  background-size: cover;
  z-index: 27;
}
.flex-row-be {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  width: 80vw;
  height: calc(42 * var(--rpx));
  margin: calc(9 * var(--rpx)) 0 0 calc(40 * var(--rpx));
  z-index: 18;
}
.rectangle-e {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 12;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-f {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 13;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-10 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 10;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-11 {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 11;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-one {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 17;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-two {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 18;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.rectangle-three {
  flex-shrink: 0;
  position: relative;
  width: calc(42 * var(--rpx));
  height: calc(42 * var(--rpx));
  background: #fff2e2;
  z-index: 14;
  border: calc(2.5 * var(--rpx)) solid #e1cfb9;
}
.loader {
            margin-top: 10vw; /* Adjusted margin to add space on top */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        #load-img{
            animation: oscillateOpacity 1s infinite;
        }

        @keyframes oscillateOpacity {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
    }}
    .prod-img{
        border-radius: calc(8 * var(--rpx));
        width: 100%;
        height: 100%;
    }

</style>

<div id="main">
  <div class="row-1" onclick="redirect()">
    <div class="timer">
      <p id="days"></p>
    </div>
    <div id="separator">&nbsp;</div>
    <div class="timer">
      <p id="hours"></p>
    </div>
    <div class="timer">:</div>
    <div class="timer">
      <p id="minutes"></p>
    </div>
    <div class="timer">:</div>
    <div class="timer">
      <p id="seconds"></p>
    </div>
  </div>


    <div class="rectangle">
      <div class="flex-row">
        <div class="rectangle-1"></div>
        <div class="rectangle-2"></div>
        <div class="rectangle-3"></div>
        <div class="rectangle-4"></div>
        <div class="rectangle-5"></div>
        <div class="rectangle-6"></div>
        <div class="rectangle-7"></div>
      </div>
      <div class="flex-row-ae">
        <div class="rectangle-a">
          <div class="rectangle-b">
            <img src="{{imgurl}}" alt="" class="prod-img">
          </div>
          <div class="brand-name">{{brandname}}</div>
          <div class="product-name">{{productname}}</div>
          <div class="starting-price">Starting price: {{startingprice}}/=</div>
          <div class="auction-time">Auction starts on {{month}} {{day}}</div>
          <button class="rectangle-c" onclick="showProd()">
            <div class="view-product">View Product</div>
          </button>
        </div>
        <div class="polygon" id="right"></div>
        <div class="polygon-d" id="left"></div>
      </div>
      <div class="flex-row-be">
        <div class="rectangle-e"></div>
        <div class="rectangle-f"></div>
        <div class="rectangle-10"></div>
        <div class="rectangle-11"></div>
        <div class="rectangle-one"></div>
        <div class="rectangle-two"></div>
        <div class="rectangle-three"></div>
      </div>
    </div>
</div>





<script>
function showProd() {
    const index = {{ index }};
    window.location.href = `/products/${index}`;
}

function redirect() {
    window.location.href = "/";
}

function load() {
    document.getElementById("loading").style.display = "none";
    document.getElementById("main").style.display = "block";
}

function updateCountdown() {
    const now = new Date(new Date().toLocaleString("en-US", { timeZone: "Asia/Dhaka" })).getTime();
    const distance = countDownDate - now;

    const timerRow = document.querySelector(".row-1");

    if (distance < -30 * 60 * 1000) {
        clearInterval(timerInterval);
        timerRow.innerHTML = `<p class="timer">Auction has ended!</p>`;
        return;
    }

    if (distance < 0) {
        timerRow.innerHTML = `<p class="timer">Auction has started!</p>`;
        return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").textContent = days;
    document.getElementById("hours").textContent = hours;
    document.getElementById("minutes").textContent = minutes;
    document.getElementById("seconds").textContent = seconds;
}

function setupNavigation() {
    const index = {{ index }};
    const right = document.getElementById("right");
    const left = document.getElementById("left");

    if (right) {
        right.onclick = () => window.location.href = `/landing/${index + 1}`;
    }

    if (left) {
        const prevIndex = Math.max(index - 1, 0);
        left.onclick = () => window.location.href = `/landing/${prevIndex}`;
    }

    const timerRow = document.querySelector(".row-1");
    if (timerRow) {
        timerRow.addEventListener("click", redirect);
    }
}

const countDownDate = new Date("{{ date }}").getTime();
let timerInterval;

document.addEventListener("DOMContentLoaded", () => {
    setupNavigation();
    updateCountdown(); // initial call
    timerInterval = setInterval(updateCountdown, 1000);
});
</script>



{%endblock%}